{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header card-header-custom text-white">
      <h5>Detalhes do Contrato</h5>
    </div>
    <div class="card-body">
      <p><strong>C√≥digo do Projeto:</strong> {{ contrato.cod_projeto }}</p>
      <p><strong>Cliente:</strong> {{ contrato.cod_projeto.cliente }}</p>
      <p><strong>Coordenador:</strong> {{ contrato.coordenador }}</p>
      <p><strong>Data In√≠cio:</strong> {{ contrato.data_inicio|date:"d/m/Y" }}</p>
      <p><strong>Data Fim:</strong> {{ contrato.data_fim|date:"d/m/Y" }}</p>
      <p><strong>Valor Total:</strong> R$ {{ contrato.valor_total|floatformat:2 }}</p>
      <p><strong>Status:</strong> {{ contrato.get_status_display }}</p>
      <p><strong>Objeto:</strong> {{ contrato.objeto }}</p>

      <hr>

      {# Bloco da proposta do fornecedor selecionado #}
      {% if proposta_fornecedor %}
        <div class="mt-3">
          <h6>üìÑ Proposta do Fornecedor Selecionado</h6>
          <p><strong>Fornecedor:</strong> {{ proposta_fornecedor.fornecedor }}</p>
          <p><strong>Valor Proposta:</strong> R$ {{ proposta_fornecedor.valor_proposta|floatformat:2 }}</p>
          <p><strong>Condi√ß√£o de Pagamento:</strong> {{ proposta_fornecedor.get_condicao_pagamento_display }}</p>
          {% if proposta_fornecedor.prazo_validade %}
            <p><strong>Prazo de Validade:</strong> {{ proposta_fornecedor.prazo_validade|date:"d/m/Y" }}</p>
          {% endif %}
          {% if proposta_fornecedor.arquivo_proposta %}
            <p>
              <a href="{{ proposta_fornecedor.arquivo_proposta.url }}" class="btn btn-sm btn-outline-primary">
                üìé Baixar Proposta
              </a>
            </p>
          {% endif %}
        </div>
      {% else %}
        <p><em>Nenhuma proposta vinculada ao fornecedor selecionado.</em></p>
      {% endif %}
    </div>

    <div class="card-footer text-end">
      <a href="{% url 'lista_contratos' %}" class="btn btn-custom">‚Üê Voltar</a>
    </div>
  </div>
</div>
{% endblock %}
