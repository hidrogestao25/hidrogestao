{% extends "base.html" %}
{% block content %}

<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header card-header-custom text-white">
      <h5>üì¶ Detalhes da Entrega</h5>
    </div>
    <div class="card-body">
      <p><strong>Descri√ß√£o:</strong> {{ evento.descricao }}</p>
      <p><strong>Data Prevista de Entrega:</strong> {{ evento.data_prevista|date:"d/m/Y" }}</p>
      <p><strong>Data Prevista para Pagamento:</strong> {{ evento.data_prevista_pagamento|date:"d/m/Y" }}</p>
      <p><strong>Valor Previsto:</strong> R$ {{ evento.valor_previsto|floatformat:2 }}</p>

      {% if evento.valor_pago %}
        <p><strong>Valor Pago:</strong> R$ {{ evento.valor_pago|floatformat:2 }}</p>
      {% else %}
        <p><strong>Valor Pago:</strong> - </p>
      {% endif %}

      {% if evento.data_pagamento %}
        <p><strong>Data do Pagamento:</strong> {{ evento.data_pagamento|date:"d/m/Y" }}</p>
      {% else %}
        <p><strong>Data do Pagamento:</strong> - </p>
      {% endif %}

      <p><strong>Status:</strong>
        {% if evento.realizado %}
          ‚úÖ Realizado
        {% else %}
          ‚è≥ Pendente
        {% endif %}
      </p>

      {% if evento.observacao %}
        <p><strong>Observa√ß√µes:</strong> {{ evento.observacao }}</p>
      {% endif %}


    <hr>
    <div class="mb-4">
    <h5>Boletins de Medi√ß√£o Cadastrados</h5>
    {% if bms %}
    <table class="table table-striped mt-2">
      <thead>
        <tr>
          <th>N√∫mero</th>
          <th>Data do Pagamento</th>
          <th>Valor Pago</th>
          <th>Status</th>
          <th>Observa√ß√µes</th>
          <th>Arquivo</th>
        </tr>
      </thead>
      <tbody>
        {% for bm in bms %}
          <tr>
            <td>{{ bm.numero_bm }}</td>
            <td>{{ bm.data_pagamento|date:"d/m/Y" }}</td>
            <td>R$ {{ bm.valor|floatformat:2 }}</td>
            <td>
              {% if bm.status %}
                ‚úÖ {{ bm.status }}
              {% else %}
                -
              {% endif %}
            </td>
            {% if bm.observacao %}
            <td>{{ bm.observacao }}</td>
            {% else %}
              -
            {% endif %}
            <td>
              {% if bm.arquivo_bm %}
                <a href="{{ bm.arquivo_bm.url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                  Abrir/Download
                </a>
              {% else %}
                -
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="mt-3 text-muted">Nenhum Boletim de Medi√ß√£o cadastrado para este evento.</p>
  {% endif %}
  </div>

    <div class="d-flex justify-content-end gap-2">
      <a href="javascript:history.back()" class="btn btn-custom">‚Üê Voltar</a>
    </div>
    </div>
  </div>
</div>

{% endblock %}
