{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header card-header-custom text-white">
      <h5>Detalhes do Contrato</h5>
    </div>
    <div class="card-body">
      <p><strong>Código do Projeto:</strong> {{ contrato.cod_projeto }}</p>
      <p><strong>Cliente:</strong> {{ contrato.cliente }}</p>
      <p><strong>Coordenador:</strong> {{ contrato.coordenador }}</p>
      <p><strong>Data Início:</strong> {{ contrato.data_inicio|date:"d/m/Y" }}</p>
      <p><strong>Data Fim:</strong> {{ contrato.data_fim|date:"d/m/Y" }}</p>
      <p><strong>Valor Total:</strong> R$ {{ contrato.valor_total|floatformat:2 }}</p>
      <p><strong>Status:</strong> {{ contrato.status }}</p>
      <p><strong>Objeto:</strong> {{ contrato.objeto }}</p>
      <p><strong>Proposta:</strong> {{ contrato.proposta }}</p>
      {% if contrato.observacao %}
        <p><strong>Observações do Contrato:</strong> {{ contrato.observacao }}</p>
      {% endif %}
    </div>
    <div class="mt-4">
      <h5>Resumo Financeiro</h5>

      <p>
        <strong>Pago:</strong> {{ resumo_percentual.pago }}% do valor total<br>
        <strong>Previsto:</strong> {{ resumo_percentual.previsto }}% do valor total<br>
        <strong>Restante:</strong> {{ resumo_percentual.restante }}%
      </p>

      <div>
        {{ grafico_contrato|safe }}
      </div>
    </div>
    <div class="card-footer text-end">
      <a href="{% url 'lista_contratos' %}" class="btn btn-custom">← Voltar</a>
    </div>
  </div>
</div>
{% endblock %}
