


<div class="modal-body">
    <form id="formEditarNF" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
    </form>
</div>

<div class="modal-footer">
    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
    <button class="btn btn-primary" id="btnSalvarNF">Salvar alterações</button>
</div>

<script>
document.getElementById("btnSalvarNF").addEventListener("click", function() {
    var form = document.getElementById("formEditarNF");
    var formData = new FormData(form);

    fetch("{% url 'editar_nf' nf.id %}", {
        method: "POST",
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            window.location.reload();
        } else {
            alert("Erro ao salvar: " + JSON.stringify(data.errors));
        }
    });
});
</script>
